apiVersion: v1
kind: ConfigMap
metadata:
  name: server-price-tracker-config
data:
  config.yaml: |
    server:
      host: "0.0.0.0"
      port: 8080
      read_timeout: 30s
      write_timeout: 30s

    database:
      host: "${DB_HOST}"
      port: 5432
      name: "${DB_NAME}"
      user: "${DB_USER}"
      password: "${DB_PASSWORD}"
      sslmode: require
      pool_size: 10

    ebay:
      app_id: "${EBAY_APP_ID}"
      cert_id: "${EBAY_CERT_ID}"
      marketplace: EBAY_US
      max_calls_per_cycle: 50

    llm:
      backend: ollama
      ollama:
        endpoint: http://ollama.ollama.svc:11434
        model: "mistral:7b-instruct-v0.3-q5_K_M"
      use_grammar: true
      concurrency: 4
      timeout: 30s

    scoring:
      weights:
        price: 0.40
        seller: 0.20
        condition: 0.15
        quantity: 0.10
        quality: 0.10
        time: 0.05
      min_baseline_samples: 10
      baseline_window_days: 90

    schedule:
      ingestion_interval: 30m
      baseline_interval: 6h
      stagger_offset: 30s

    notifications:
      discord:
        enabled: true
        webhook_url: "${DISCORD_WEBHOOK_URL}"

    logging:
      level: info
      format: json
