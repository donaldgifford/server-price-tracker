---
suite: secret
templates:
  - templates/secret.yaml
tests:
  - it: renders Secret when secret.create is true
    set:
      secret.create: true
    asserts:
      - isKind:
          of: Secret
      - equal:
          path: metadata.name
          value: RELEASE-NAME-server-price-tracker-secrets

  - it: does not render when secret.create is false
    set:
      secret.create: false
    asserts:
      - hasDocuments:
          count: 0

  - it: has type Opaque
    set:
      secret.create: true
    asserts:
      - equal:
          path: type
          value: Opaque
